# ChronoRift Environment Configuration Template
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control (already in .gitignore)

## ============================================================================
## Flask Configuration
## ============================================================================

# Flask application environment (development, testing, production)
FLASK_ENV=development
FLASK_DEBUG=True
FLASK_APP=run.py

# Secret key for session management and CSRF protection
# Generate a secure random key: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your-super-secret-key-change-this-in-production-12345678901234567890

# Application host and port
FLASK_HOST=0.0.0.0
FLASK_PORT=5000

# Base URL for the application (used for redirects, email links, etc.)
BASE_URL=http://localhost:5000

## ============================================================================
## Database Configuration
## ============================================================================

# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://chronorift_user:chronorift_password@localhost:5432/chronorift_dev

# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Enable SQL query logging (development only)
SQLALCHEMY_ECHO=False

## ============================================================================
## Redis Configuration
## ============================================================================

# Redis connection URL for caching and session management
# Format: redis://[:password]@host:port/db_number
REDIS_URL=redis://localhost:6379/0

# Redis configuration for different purposes
REDIS_CACHE_URL=redis://localhost:6379/1
REDIS_SESSION_URL=redis://localhost:6379/2

# Redis connection pool settings
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

## ============================================================================
## JWT Authentication
## ============================================================================

# JWT secret key (different from Flask secret key)
# Generate: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production-98765432109876543210

# JWT algorithm for token encoding
JWT_ALGORITHM=HS256

# JWT token expiration times (in seconds)
JWT_ACCESS_TOKEN_EXPIRES=3600          # 1 hour
JWT_REFRESH_TOKEN_EXPIRES=2592000      # 30 days
JWT_EMAIL_VERIFICATION_EXPIRES=86400   # 24 hours

# JWT token audience and issuer
JWT_ISSUER=chronorift-api
JWT_AUDIENCE=chronorift-client

## ============================================================================
## CORS Configuration
## ============================================================================

# Allowed origins for CORS (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5000,https://chronorift.com

# Allow credentials in CORS requests
CORS_ALLOW_CREDENTIALS=True

# Maximum age for CORS preflight cache (in seconds)
CORS_MAX_AGE=3600

## ============================================================================
## WebSocket Configuration
## ============================================================================

# WebSocket protocol version
SOCKETIO_PROTOCOL_VERSION=4

# WebSocket ping timeout (in seconds)
SOCKETIO_PING_TIMEOUT=60

# WebSocket ping interval (in seconds)
SOCKETIO_PING_INTERVAL=25

# Enable WebSocket message queue for distributed deployments
SOCKETIO_MESSAGE_QUEUE=redis://localhost:6379/3

## ============================================================================
## Celery Configuration (Background Jobs)
## ============================================================================

# Celery broker URL (where to send tasks)
CELERY_BROKER_URL=redis://localhost:6379/4

# Celery backend URL (where to store results)
CELERY_RESULT_BACKEND=redis://localhost:6379/5

# Celery task serialization format
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json

# Celery task time limits (in seconds)
CELERY_TASK_SOFT_TIME_LIMIT=3600
CELERY_TASK_TIME_LIMIT=3600

# Enable task result persistence
CELERY_RESULT_EXPIRES=3600

## ============================================================================
## APScheduler Configuration (Scheduled Events)
## ============================================================================

# APScheduler job store (where to persist scheduled jobs)
APSCHEDULER_JOBSTORE_URL=postgresql://chronorift_user:chronorift_password@localhost:5432/chronorift_dev

# APScheduler executor pool size
APSCHEDULER_EXECUTORS_DEFAULT_POOL_SIZE=20

## ============================================================================
## Email Configuration
## ============================================================================

# Email provider settings (Gmail, SendGrid, AWS SES, etc.)
MAIL_PROVIDER=smtp  # Options: smtp, sendgrid, aws_ses

# SMTP Configuration
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password

# SendGrid Configuration (alternative)
SENDGRID_API_KEY=your-sendgrid-api-key

# Email settings
MAIL_DEFAULT_SENDER=noreply@chronorift.com
MAIL_SUPPORT_EMAIL=support@chronorift.com
MAIL_BUSINESS_EMAIL=business@chronorift.com

## ============================================================================
## AWS S3 Configuration (Asset Storage)
## ============================================================================

# AWS credentials
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1

# S3 bucket for game assets
S3_BUCKET_NAME=chronorift-assets
S3_BUCKET_REGION=us-east-1

# CloudFront CDN distribution
CDN_URL=https://cdn.chronorift.com
CLOUDFRONT_DISTRIBUTION_ID=your-cloudfront-id

## ============================================================================
## Authentication Providers (OAuth)
## ============================================================================

# Discord OAuth
DISCORD_CLIENT_ID=your-discord-client-id
DISCORD_CLIENT_SECRET=your-discord-client-secret
DISCORD_REDIRECT_URI=http://localhost:5000/auth/discord/callback

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:5000/auth/google/callback

# GitHub OAuth
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_REDIRECT_URI=http://localhost:5000/auth/github/callback

## ============================================================================
## Monitoring & Analytics
## ============================================================================

# Sentry error tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/your-project-id
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# New Relic application monitoring
NEW_RELIC_CONFIG_FILE=newrelic.ini
NEW_RELIC_ENVIRONMENT=development
NEW_RELIC_LOG_LEVEL=info

# Application Insights (Azure)
APPINSIGHTS_INSTRUMENTATION_KEY=your-app-insights-key

## ============================================================================
## Game Configuration
## ============================================================================

# Game world settings
GAME_DIFFICULTY=normal          # Options: easy, normal, hard
GAME_PVP_ENABLED=True
GAME_TRADING_ENABLED=True
GAME_SEASONAL_EVENTS=True

# Rift spawn configuration
RIFT_SPAWN_INTERVAL=300         # Seconds between rift spawns
RIFT_MAX_CONCURRENT=50          # Maximum rifts in world
RIFT_DESPAWN_TIMEOUT=1800       # Seconds before rift despawns

# Echo configuration
ECHO_MAX_PER_PLAYER=6           # Maximum Echoes per player team
ECHO_INITIAL_LEVEL=1
ECHO_MAX_LEVEL=100

# Economy settings
STARTING_BALANCE=1000           # Starting temporal fragments
ECHO_CAPTURE_REWARD=50
RIFT_STABILIZE_REWARD=100
FACTION_CONTROL_REWARD=500

# Combat settings
COMBAT_TURN_TIME_LIMIT=30       # Seconds per turn
COMBAT_MAX_PARTY_SIZE=6
PVP_LEVEL_RESTRICTION=10        # Minimum level to enable PvP

# Bonding system
BONDING_BASE_RATE=1.0           # Multiplier for bonding experience
BONDING_MAX_LEVEL=10
BONDING_UNLOCK_ABILITY_THRESHOLD=5

# Guild settings
GUILD_MAX_MEMBERS=100
GUILD_CREATION_COST=5000
GUILD_TERRITORY_CONTROL_ENABLED=True

## ============================================================================
## Rate Limiting
## ============================================================================

# API rate limiting (requests per minute)
RATE_LIMIT_API=100
RATE_LIMIT_AUTH=10
RATE_LIMIT_COMBAT=30
RATE_LIMIT_TRADING=20

# Enable/disable rate limiting
RATE_LIMITING_ENABLED=True

## ============================================================================
## Logging Configuration
## ============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log file configuration
LOG_FILE=logs/chronorift.log
LOG_MAX_BYTES=10485760          # 10MB
LOG_BACKUP_COUNT=5

# Log format
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# Log to file and console
LOG_TO_FILE=True
LOG_TO_CONSOLE=True

## ============================================================================
## Testing Configuration
## ============================================================================

# Test database URL (use separate test database)
TEST_DATABASE_URL=postgresql://chronorift_user:chronorift_password@localhost:5432/chronorift_test

# Enable test mode features
TESTING=False

# Test fixtures and seed data
USE_TEST_FIXTURES=False

## ============================================================================
## Development Tools
## ============================================================================

# Enable Flask shell integration
FLASK_SHELL_CONTEXT_PROCESSOR=app.shell_context

# Enable debug toolbar
DEBUG_TOOLBAR_ENABLED=False

# Enable SQL query profiling
QUERY_PROFILING_ENABLED=False

## ============================================================================
## Feature Flags
## ============================================================================

# Enable/disable experimental features
FEATURE_ADVANCED_BONDING=True
FEATURE_FACTION_WARFARE=True
FEATURE_TRADING_MARKETPLACE=True
FEATURE_SEASONAL_EVENTS=True
FEATURE_PVP_BATTLES=True
FEATURE_GUILD_RAIDS=True
FEATURE_ECHO_BREEDING=False     # Coming in Phase 2

## ============================================================================
## Performance Tuning
## ============================================================================

# Cache settings
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=chronorift:

# Query optimization
SQLALCHEMY_TRACK_MODIFICATIONS=False
LAZY_LOAD_ENABLED=False

# WebSocket performance
SOCKETIO_ASYNC_MODE=gevent
SOCKETIO_ENGINEIO_LOGGER=False
SOCKETIO_SOCKETIO_LOGGER=False

## ============================================================================
## Security Settings
## ============================================================================

# Enable HTTPS enforcement
ENFORCE_HTTPS=False             # Set to True in production

# HSTS (HTTP Strict Transport Security)
HSTS_ENABLED=False
HSTS_MAX_AGE=31536000

# Content Security Policy
CSP_ENABLED=False
CSP_DEFAULT_SRC="'self'"

# CSRF Protection
CSRF_ENABLED=True

# Password requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=True
PASSWORD_REQUIRE_NUMBERS=True
PASSWORD_REQUIRE_SPECIAL_CHARS=True

## ============================================================================
## Admin & Moderation
## ============================================================================

# Admin panel access
ADMIN_PANEL_ENABLED=True
ADMIN_PANEL_URL=/admin
ADMIN_SECRET_TOKEN=your-admin-secret-token

# Moderation settings
AUTO_MODERATION_ENABLED=True
PROFANITY_FILTER_ENABLED=True
SPAM_DETECTION_ENABLED=True

## ============================================================================
## Contact & Support
## ============================================================================

# Support contact information
SUPPORT_EMAIL=support@chronorift.com
BUSINESS_EMAIL=business@chronorift.com
DISCORD_SERVER_INVITE=https://discord.gg/codekaiju

# Help desk / ticketing system
SUPPORT_SYSTEM_ENABLED=True
SUPPORT_API_KEY=your-support-system-api-key

## ============================================================================
## End of Configuration
## ============================================================================
# Last Updated: 2026-01-21
# Instructions:
# 1. Copy this file to .env in the project root
# 2. Update all placeholder values with your actual configuration
# 3. Never commit .env to version control
# 4. For production, use a secure secrets management system (AWS Secrets Manager, HashiCorp Vault, etc.)
